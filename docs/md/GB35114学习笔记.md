# GB3511学习笔记



## 一、名词解释

1FDWSF:具有安全功能的前端设备。

2非对称加密中公私钥都可以加密，那么什么时候用公钥加密，什么时候用私钥“加密” ？

加密场景，那么肯定希望只有我才能解密，别人只能加密。即公钥加密，私钥解密。
签名场景，既然是签名，就希望只能我才能签名，别人只能验证。即私钥签名，公钥验签

3什么是数字签名，数字签名的作用是什么？

数字签名就是使用私钥对数据摘要进行签名，并附带和数据一起发送。
可以起到防篡改、防伪装、防否认的作用。
4为什么要对数据的摘要进行签名，而不是直接计算原始数据的数字签名？

数据可能比较大，签名是使用非对称加密算法，比较耗时
防止第三方使用公钥解开签名后，拿到原始数据

5 什么是数字证书，数字证书存在解决了什么问题？

数字证书就是由 CA 机构使用自己私钥，对证书申请者的公钥进行签名认证。
数字证书解决了如何安全分发公钥的问题，也奠定了信任链的基础。

## 二、基本功能

### 1 统一编码

（编码规则见附录B）

### 2 用户身份认证

----基于数字证书的用户认证

### 3 前端设备分级（A\B\C）

### 4 设备支持身份认证

（1）管理平台对FDWSF的关系管理

（2）管理平台对接入的FDWSF的单向和双向认证

### 5 管理平台之间认证

互联互通——双向身份认证

（1）互联认证

（2）级联认证

### 6授权和访问控制

（1）管理平台-——角色控制对用户方位管理

（2）管理平台——访问控制包含前端设备的安全能力等级和视频是否加密

（3）能访问加密视频的用户——基于数字证书认证，可以对加密视频播放回放下载删除

（4）跨域方位——对用户身份信息控制

### 7控制信令认证

（1）管理平台和FDWSF——采用SM3对SIP认证

（2）SIP消息头域修改

（3）跨域方位时候SIP头域的控制

### 8视频源签名及完整性校验

（1）B\C级别的设备对视频数据签名+TCP

（2）B\C级FDWSF支持视频I帧及关键帧的签名

（3）管理平台支持对数据签名结果接受存储和验证

（4）具体格式。。。。。

### 9视音频加密

1 C级FDWSF对采集的音视频都要加密操作及传输

2 平台应支持音视频加密传呼，及存储、播放、导出等操作

3 格式示例

4 视频导出时管理平台应更换视频密钥加密密钥

5加密密钥直接存储

### 10设备异常报警

1 发现异常：包括非授权处理、密码模块损坏、丢弃

2 记录异常——写入日志

### 11 安全管理

1 三类管理员角色：安全管理员、操作员、审计员

2 三类角色各自负责职能划分

3 角色的身份校验

### 12 日志管理

1 平台的日志记录

2 前端设备的异常日志

### 13 非对称密钥管理

### 14 对称密钥管理

1 对称密钥完整生命周期管理

2 管理平台保存前端设备VKEK(设备注册时更新)

3 VKEK周期管理



## 三、GB35114问题解答

1如何校验下级签名有效性？

数字证书证书有有效期格式（生效日期和失效日期），根据这个来判断（设备证书格式应符合GM/T0015-2012的规定）



2 如何校验R1有效性，只能1次+有效性怎么去做？

业务部分考虑



3 VKEK是什么？VEMK和VEMK版本号又是什么？它们从何而来？

| 密钥名称         | 密钥简称 | 算法 | 备注         |
| ---------------- | -------- | ---- | ------------ |
| 视频加密密钥     | VEK      | SM4  | 加密视频流   |
| 视频密钥加密密钥 | VKEK     | SM4  | 加密保护VEK  |
| 视频主密钥       | VEMK     | SM4  | 分散得到VKEK |

（1）VEK:视频加密密钥（视频密钥）　video encryption key

前端设备随机产生的对称密钥，对视频内容进行加密。

（2）VKEK:视频密钥加密密钥　video key encryption key

由视频监控安全管理平台产生并分发给具有安全功能前端设备，属于对称密钥。用于对视频密钥进行加密。管理平台保管所有前端设备的VKEK。

前端设备向管理平台注册时，管理平台更新VKEK并传输到前端设备的密码模块里保存。视频密钥加密密钥VKEK 更新周期不大于１天

（3）VEMK:视频主密钥

视频主密钥主要用来产生VKEK



4 第一次resgister中keyversion版本号调研

第一次发送REGISTER请求，增加Authorization头字段，

Authorization的值为Capability，携带参数algorithm、keyversion。

其中keyversion为密钥版本号，取值为FDWSF 的本地时间，16位数字字符，例如：keyversion＝＂1970-01-01T9:18:43＂





